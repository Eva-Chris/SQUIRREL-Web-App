<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename= 'css/style.css') }}">
    <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="{{url_for('static', filename='js/highchartTable.js')}}"></script>

    <meta charset="UTF-8">
    <meta name="description" content="Home page with tables and charts">
    <meta name="keywords" content="html, home">
    <meta name="author" content="Eva Chrysostomaki">

    <title>SQUIRREL</title>

    <!--favicon taken from flaticon.com -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename= 'images/squirrel.ico') }}">
</head>

<body>
    <div class="content">
        <h1 id="title">SQUIRREL</h1>

        <!-- navigation bar -->
        <div class="nav_bar">
            <ul class="nav_content">
                <li>
                    <a class="active" href="#home">
                        <i class='bx bxs-home'></i>
                        <span class="nav_page">Home</span>
                    </a>
                </li>
                <li>
                    <a href="{{url_for('watch_next')}}">
                        <i class='bx bxs-movie-play'></i>
                        <span class="nav_page">Watch Next</span>
                    </a>
                </li>
                <li>
                    <a href="{{url_for('about')}}">
                        <i class='bx bxs-info-square'></i>
                        <span class="nav_page">About</span>
                    </a>
                </li>
                <li>
                    <a href="{{url_for('contact')}}">
                        <i class='bx bxs-envelope'></i>
                        <span class="nav_page">Contact</span>
                    </a>
                </li>
            </ul>
        </div>

        {% if test %}
        <b>Select a group: </b>

        <!-- tables with groups -->
        <div class="row">
            <div class="column">
                <table>
                    <thead>
                        <th>Group</th>
                        <th>Show Results</th>
                    </thead>
                    <tbody>

                        {% for test in test[:10] %}
                        <tr>
                            <td><img src="{{ url_for('static', filename = 'images/avatar.png') }}"></td>
                            <form method="post" action="/">
                                <td><input class="button" type="submit" value="{{test.split('\t', 1)[0]}}"
                                        name="{{test.split('\t', 1)[0]}}" />
                                </td>
                            </form>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div class="column">
                <table>
                    <thead>
                        <th>Group</th>
                        <th>Show Results</th>
                    </thead>
                    <tbody>

                        {% for test in test[10:] %}
                        <tr>
                            <td><img src="{{ url_for('static', filename = 'images/avatar.png') }}"></td>
                            <form method="post" action="/">
                                <td><input class="button" type="submit" value="{{test.split('\t', 1)[0]}}"
                                        name="{{test.split('\t', 1)[0]}}" />
                                </td>
                            </form>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        {% endif %}

        <!-- table with recommended movies and individual scores -->
        {% for item in items %}
        {% if loop.first %}
        <b>Group: </b> {{item.id}}
        {% endif %}
        {% endfor %}
        <table>
            {% if items %}
            <thead>
                <th>Round</th>
                <th>Recommended Movie</th>
                <th>M1 Score</th>
                <th>M2 Score</th>
                <th>M3 Score</th>
                <th>M4 Score</th>
                <th>M5 Score</th>
            </thead>
            <tbody>

                {% for item in items %}
                <tr>
                    <td>{{item.round}}</td>
                    <td><img src="{{ url_for('static', filename = 'posters/'+ item.movie +'.jpg') }}"></td>
                    <td>{{item.m1_score}}</td>
                    <td>{{item.m2_score}}</td>
                    <td>{{item.m3_score}}</td>
                    <td>{{item.m4_score}}</td>
                    <td>{{item.m5_score}}</td>
                </tr>
                {% endfor %}
            </tbody>
            {% endif %}
        </table>

        <!-- tables with scores and charts -->
        <b>All Scores:</b>
        <div class="row">
            <div class="column">
                <table class="highchart" data-graph-container="#graphcontainer" data-graph-type="column"
                    data-graph-color-1="#005EAD">
                    <thead>
                        <th>Round</th>
                        <th>{{ov_sat[0]}}</th>
                    </thead>
                    <tbody>
                        {% for item in ov_sat[1:] %}
                        <tr>
                            <td>{{ loop.index0 }}</td>
                            <td>{{'%0.3f'|format(item|float)}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <div id="graphcontainer"></div>
            </div>

            <div class="column">
                <table class="highchart2" data-graph-container="#graphcontainer2" data-graph-type="column"
                    data-graph-color-1="#005EAD">
                    <thead>
                        <th>Round</th>
                        <th>{{max_min[0]}}</th>
                    </thead>
                    <tbody>
                        {% for item in max_min[1:] %}
                        <tr>
                            <td>{{ loop.index0 }}</td>
                            <td>{{'%0.3f'|format(item|float)}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <div id="graphcontainer2"></div>
            </div>

            <div class="column">
                <table class="highchart3" data-graph-container="#graphcontainer3" data-graph-type="column"
                    data-graph-color-1="#005EAD">
                    <thead>
                        <th>Round</th>
                        <th>{{ndcg[0]}}</th>
                    </thead>
                    <tbody>
                        {% for item in ndcg[1:] %}
                        <tr>
                            <td>{{ loop.index0 }}</td>
                            <td>{{'%0.3f'|format(item|float)}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <div id="graphcontainer3"></div>
            </div>

            <div class="column">
                <table class="highchart4" data-graph-container="#graphcontainer4" data-graph-type="column"
                    data-graph-color-1="#005EAD">
                    <thead>
                        <th>Round</th>
                        <th>{{dfh[0]}}</th>
                    </thead>
                    <tbody>
                        {% for item in dfh[1:] %}
                        <tr>
                            <td>{{ loop.index0 }}</td>
                            <td>{{'%0.3f'|format(item|float)}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <div id="graphcontainer4"></div>
            </div>

            <div class="column">
                <table class="highchart5" data-graph-container="#graphcontainer5" data-graph-type="column"
                    data-graph-color-1="#005EAD">
                    <thead>
                        <th>Round</th>
                        <th>{{f_score[0]}}</th>
                    </thead>
                    <tbody>
                        {% for item in f_score[1:] %}
                        <tr>
                            <td>{{ loop.index0 }}</td>
                            <td>{{'%0.3f'|format(item|float)}}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <div id="graphcontainer5"></div>
            </div>
        </div>

        {% if items is defined %}
        <input type="button" class="button" value="Go back" onclick="history.back()">
        {% endif %}

    </div>

    <!-- create charts from tables using highcharts -->
    <script>
        $('table.highchart').highchartTable();
        $('table.highchart2').highchartTable();
        $('table.highchart3').highchartTable();
        $('table.highchart4').highchartTable();
        $('table.highchart5').highchartTable();
    </script>

</body>

</html>
